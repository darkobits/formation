<fm controls="vm.controls"
  name="vm.addressForm"
  on-submit="vm.submit"
  on-ready="vm.fmReady"
  ng-disabled="vm.disableForm"
  debug>

  <!-- API Errors -->
  <section>
    <fm-input type="hidden" name="apiError"></fm-input>
    <fm-errors for="apiError" class="ErrorToast"></fm-errors>
  </section>

  <!-- Name -->
  <section>
    <fm-input type="text"
      name="name">
      Name
    </fm-input>
    <fm-errors for="name"></fm-errors>
  </section>

  <!-- E-Mail -->
  <section>
    <fm-input type="text"
      name="email">
      E-Mail Address
    </fm-input>
    <fm-errors for="email"></fm-errors>
  </section>

  <!-- E-Mail (Match) -->
  <section>
    <fm-input type="text"
      name="emailMatch">
      E-Mail Address (Verify)
    </fm-input>
    <fm-errors for="emailMatch"></fm-errors>
  </section>

  <!-- Gender -->
  <section>
    <label class="label" ng-class="{
      'is-disabled': $fm.getControl('gender').isDisabled()
    }">
    Gender
    </label>
    <fm-input type="radio"
      name="gender"
      ng-value="'M'">
      Male
    </fm-input>
    <fm-input type="radio"
      name="gender"
      ng-value="'F'">
      Female
    </fm-input>
    <fm-errors for="gender"></fm-errors>
  </section>

  <!-- Addresses -->
  <fm-group name="addresses" repeat="true" debug>
    <fm controls="vm.addressFormControls">

      <label class="label"
        ng-class="{'is-disabled': $fm.isDisabled()}">
        {{ $fm.model.type }}
      </label>
      <br>

      <!-- Street Address -->
      <section>
        <fm-input type="text"
          name="streetAddress">
          Street Address
        </fm-input>
        <fm-errors for="streetAddress"></fm-errors>
      </section>

      <!-- Locality -->
      <section>
        <fm-input type="text"
          name="locality">
          Locality
        </fm-input>
        <fm-errors for="locality"></fm-errors>
      </section>

      <!-- Administrative Area -->
      <section>
        <fm-select
          name="administrativeArea"
          options="i.value as i.label for i in [
            {label: 'Rivendell', value: 'RD'},
            {label: 'Mordor', value: 'MD'}
          ]">
          Administrative Area
        </fm-select>
        <fm-errors for="locality"></fm-errors>
      </section>
    </fm>
  </fm-group>

  <button type="submit"
    ng-disabled="!$fm.isSubmittable()"
    title="{{ $fm.$valid ? 'Submit' : 'Complete the form before submitting.' }}">
    Submit
  </button>
</fm>

<highlight lang="json"
  code="vm.addressForm.getModelValues() | json">
</highlight>
